<?xml version="1.0"?>
<rules version="2014.0" author="Esri R+D Center Zurich">
	<!-- Attributes -->
	<attr name="BuildingHeight" value="62"/>
	<attr name="FloorHeight" value="3.5"/>
	<attr name="GroundfloorHeight" value="4.3"/>
	<attr name="TileWidth" value="3.55"/>
	<attr name="CorniceOverhang" value="1.2"/>
	<attr name="WindowHeight" value="2.05"/>
	<attr name="FrontWindowWidth" value="2.15"/>
	<attr name="RearWindowWidth" value="1.2"/>
	<attr name="SillSize" value="0.26"/>
	<attr name="CornerWallWidth" value="1"/>
	
	<attr name="WallTexture" value="../assets/textures/bricks.jpg"/>
	<!--<attr name="ColorizeWall" value="#FCEFE2"/>-->
	<attr name="ColorizeWall" value="#CCBFB2"/>
	<attr name="onStreet" value="true"/>
	<attr name="winSideW" value="0.7"/>
	<attr name="dividerW" value="0.25"/>
	<attr name="sillH" value="0.957"/>
	
	<!-- Volume -->
	<rule name="Lot">
		<extrude height="BuildingHeight"/>
		<comp>
			<param name="front" value="FrontFacade"/>
			<param name="back" value="RearFacade"/>
			<param name="left" value="SideFacade"/>
			<param name="right" value="SideFacade"/>
			<param name="top" value="Roof"/>
		</comp>
	</rule>
	<rule name="FrontFacade">
		<copy name="Facade"/>
	</rule>
	<rule name="RearFacade">
		<copy name="Facade"/>
	</rule>
	<rule name="SideFacade">
		<copy name="Facade"/>
	</rule>

	<!-- Facade -->
	<rule name="Facade">
		<setupProjection>
			<param name="axesSelector" value="scope.xy"/>
			<param name="texWidth" type="absolute" value="5"/>
			<param name="texHeight" type="absolute" value="5"/>
		</setupProjection>
		<split splitAxis="y">
			<param name="size">
				<element type="floating" value="2.3" name="Base"/>
				<element type="floating" value="12" name="Mid"/>
				<element type="floating" value="3" name="Upper"/>
				<element type="absolute" value="2.5" name="Top"/>
			</param>
		</split>
	</rule>
	<rule name="Base">
		<split splitAxis="y">
			<param name="size">
				<element type="absolute" value="GroundfloorHeight" name="Floor"/>
				<element type="floating" value="FloorHeight" name="Floor" repeat="true"/>
			</param>
		</split>
	</rule>
	<rule name="Mid">
		<copy name="Ledge"/>
		<split splitAxis="y">
			<param name="size">
				<element type="floating" value="FloorHeight" name="Floor" repeat="true"/>
			</param>
		</split>
	</rule>
	<rule name="Upper">
		<copy name="Ledge"/>
		<split splitAxis="y">
			<param name="size">
				<element type="floating" value="FloorHeight" name="Floor" repeat="true"/>
			</param>
		</split>
	</rule>
	<rule name="Top">
		<copy name="Wall"/>
		<copy name="Cornice"/>
	</rule>
	
	<!-- Floor -->
	<rule name="Floor">
		<split splitAxis="x">
			<param name="size">
				<element type="absolute" value="CornerWallWidth" name="Wall"/>
				<element type="floating" value="TileWidth" name="Tile" repeat="true"/>
				<element type="absolute" value="CornerWallWidth" name="Wall"/>
			</param>
		</split>
	</rule>

	<!-- Tile -->
	<rule name="Tile">
		<split splitAxis="x">
			<param name="size">
				<element type="absolute" value="winSideW" name="Wall"/>
				<element type="floating" value="1" name="SubTile"/>
				<element type="absolute" value="winSideW" name="Wall"/>
			</param>
		</split>
	</rule>
	<rule name="SubTile">
		<split splitAxis="y">
			<param name="size">
				<element type="absolute" value="sillH" name="Wall"/>
				<element type="absolute" value="WindowHeight" name="Windows"/>
				<element type="floating" value="1" name="Wall"/>
			</param>
		</split>
	</rule>

	<!-- Window -->
	<rule name="Windows">
		<split splitAxis="x">
			<param name="size">
				<element type="floating" value="scope.sx/2" name="Window"/>
				<element type="absolute" value="dividerW" name="Wall"/>
				<element type="floating" value="scope.sx/2" name="Window"/>
			</param>
		</split>
	</rule>
	<rule name="Window">
		<copy name="Still"/>
		<!--<copy name="WindowOpening"/>-->
		<translate mode="rel" coordSystem="object">
			<param name="x" value="0"/>
			<param name="y" value="0"/>
			<param name="z" value="-0.3"/>
		</translate>
		<copy name="WindowAsset"/>
	</rule>
	<rule name="WindowAsset">
		<size>
			<param name="xSize" type="relative" value="1"/>
			<param name="ySize" type="relative" value="1"/>
			<param name="zSize" type="absolute" value="0.15"/>
		</size>
		<insert geometryPath="../assets/primitives/win.single.05.sashwindow.obj"/>
		<texture>
			<param name="texture" value="../assets/textures/windowTiles_200x256.jpg"/>
		</texture>
	</rule>
	<rule name="WindowOpening">
		<translate mode="rel" coordSystem="object">
			<param name="x" value="0"/>
			<param name="y" value="0"/>
			<param name="z" value="-0.3"/>
		</translate>
		<comp>
			<param name="side" value="WallOpening"/>
		</comp>
	</rule>
	<rule name="Still">
		<size>
			<param name="xSize" type="absolute" value="scope.sx+dividerW"/>
			<param name="ySize" type="absolute" value="SillSize"/>
			<param name="zSize" type="absolute" value="0.1"/>
		</size>
		<translate mode="rel" coordSystem="object">
			<param name="x" value="-dividerW/2"/>
			<param name="y" value="-SillSize"/>
			<param name="z" value="0"/>
		</translate>
		<insert geometryPath="../assets/primitives/cube.obj"/>
		<texture>
			<param name="texture" value="../assets/textures/still.jpg"/>
		</texture>

	</rule>

	<!-- Wall -->
	<rule name="Wall">
		<color s="ColorizeWall"/>
		<texture>
			<param name="texture" value="WallTexture"/>
		</texture>
	</rule>
	<rule name="WallOpening">
		<copy name="Wall"/>
	</rule>

	<!-- Ledges -->
	<rule name="Ledge">
		<size>
			<param name="xSize" type="relative" value="1"/>
			<param name="ySize" type="absolute" value="0.6"/>
			<param name="zSize" type="absolute" value="0.6"/>
		</size>
		<translate mode="rel" coordSystem="object">
			<param name="x" value="0"/>
			<param name="y" value="sillH-0.6+0.02"/>
			<param name="z" value="0"/>
		</translate>
		<insert geometryPath="../assets/primitives/ledgeSmall.obj"/>
		<texture>
			<param name="texture" value="../assets/textures/ledge.jpg"/>
		</texture>
	</rule>

	<!-- Cornice -->
	<rule name="Cornice">
		<size>
			<param name="xSize" type="relative" value="1"/>
			<param name="ySize" type="relative" value="1"/>
			<param name="zSize" type="absolute" value="CorniceOverhang"/>
		</size>
		<insert geometryPath="../assets/primitives/ledgeLarge.obj"/>
		<texture>
			<param name="texture" value="../assets/textures/ledge.jpg"/>
		</texture>
	</rule>
	
	<!-- Roof -->
	<rule name="Roof">
		<setupProjection>
			<param name="axesSelector" value="scope.xy"/>
			<param name="texWidth" type="absolute" value="20"/>
			<param name="texHeight" type="absolute" value="15"/>
		</setupProjection>
		<texture>
			<param name="texture" value="../assets/textures/roof.jpg"/>
		</texture>
	</rule>

</rules>

