<?xml version="1.0"?>
<rules>
	<!-- Attributes -->
	<attr name="groundfloor_height" value="4"/>
	<attr name="floor_height" value="3.5"/>
	<attr name="tile_width" value="4"/>
	<attr name="height" value="20"/>
	<attr name="wallColor" value="#ffffff"/>
	<attr name="LOD" value="0"/>
	
	<!-- Initial Shape starting rule -->
	<rule name="Lot">
		<operator name="extrude">
			<param name="height" value="height"/>
		</operator>
		<operator name="copy">
			<param name="name" value="Building"/>
		</operator>
	</rule>
	
	<!-- split the building geometry into its facade components -->
	<rule name="Building">
		<operator name="comp">
			<param name="front" value="FrontFacade"/>
			<param name="side" value="SideFacade"/>
			<param name="top" value="Roof"/>
		</operator>
	</rule>
	
	<!-- the front facade is subdivided into one front groundfloor and upper floors -->
	<rule name="FrontFacade">
		<operator name="setupProjection">
			<param name="coordinateType" value="absolute"/>
			<param name="texWidth" value="2.5"/>
			<param name="texHeight" value="1"/>
		</operator>
		<operator name="texture">
			<param name="texture" value="textures/brick.jpg"/>
		</operator>
		<operator name="split">
			<param name="splitAxis" value="y"/>
			<param name="size">
				<element type="absolute" value="groundfloor_height"/>
				<element type="floating" value="floor_height" repeat="true"/>
			</param>
			<param name="name">
				<element value="Groundfloor"/>
				<element value="Floor"/>
			</param>
		</operator>
	</rule>
	
	<!-- a side facade is subdivided into one bottom floor and upper floors. -->
	<rule name="SideFacade">
		<operator name="setupProjection">
			<param name="coordinateType" value="absolute"/>
			<param name="texWidth" value="2.5"/>
			<param name="texHeight" value="1"/>
		</operator>
		<operator name="texture">
			<param name="texture" value="textures/brick.jpg"/>
		</operator>
		<operator name="split">
			<param name="splitAxis" value="y"/>
			<param name="size">
				<element type="absolute" value="groundfloor_height"/>
				<element type="floating" value="floor_height" repeat="true"/>
			</param>
			<param name="name">
				<element value="Floor"/>
				<element value="Floor"/>
			</param>
		</operator>
	</rule>
	
	<!-- a roof texture is applied to the roof face -->
	<rule name="Roof">
		<operator name="setupProjection">
			<param name="coordinateType" value="relative"/>
			<param name="texWidth" value="0"/>
			<param name="texHeight" value="0"/>
		</operator>
		<operator name="texture">
			<param name="texture" value="textures/roof.jpg"/>
		</operator>
	</rule>
	
	<!-- each floor is horizontally split into two narrow corner areas on 
		each side of the floor, and into a set of window tiles in between -->
	<rule name="Floor">
		<operator name="split">
			<param name="splitAxis" value="x"/>
			<param name="size">
				<element type="absolute" value="1.0"/>
				<element type="floating" value="tile_width" repeat="true"/>
				<element type="absolute" value="1.0"/>
			</param>
			<param name="name">
				<element value="Wall"/>
				<element value="Tile"/>
				<element value="Wall"/>
			</param>
		</operator>
	</rule>
	
	<!-- similarily, the front groundfloor is horizontally split into 
		two narrow corner areas on each side of the floor, 
		a special entrance tile on the right 
		and into a set of window tiles in between -->
	<rule name="Groundfloor">
		<operator name="split">
			<param name="splitAxis" value="x"/>
			<param name="size">
				<element type="absolute" value="1.0"/>
				<element type="floating" value="tile_width" repeat="true"/>
				<element type="floating" value="tile_width" />
				<element type="absolute" value="1.0"/>
			</param>
			<param name="name">
				<element value="Wall"/>
				<element value="Tile"/>
				<element value="EntranceTile"/>
				<element value="Wall"/>
			</param>
		</operator>
	</rule>

	<!--
	<rule name="Tile">
		<operator name="split">
			<param name="splitAxis" value="x"/>
			<param name="size">
				<element type="floating" value="1.0"/>
				<element type="absolute" value="2.0"/>
				<element type="floating" value="1.0"/>
			</param>
			<param name="name">
				<element value="Wall"/>
				<element value="WallWindowWall"/>
				<element value="Wall"/>
			</param>
		</operator>
	</rule>
	<rule name="WallWindowWall">
		<operator name="split">
			<param name="splitAxis" value="y"/>
			<param name="size">
				<element type="absolute" value="1.0"/>
				<element type="absolute" value="1.5"/>
				<element type="floating" value="1.0"/>
			</param>
			<param name="name">
				<element value="Wall"/>
				<element value="Window"/>
				<element value="Wall"/>
			</param>
		</operator>
	</rule>
	<rule name="Window">
		<operator name="translate">
			<param name="mode" value="rel"/>
			<param name="coordSystem" value="object"/>
			<param name="x" value="0"/>
			<param name="y" value="0"/>
			<param name="z" value="-0.1"/>
		</operator>
		<operator name="setupProjection">
			<param name="coordinateType" value="relative"/>
			<param name="texWidth" value="0"/>
			<param name="texHeight" value="0"/>
		</operator>
		<operator name="insert">
			<param name="geometryPath" value="../models/window.obj"/>
		</operator>
		<operator name="color">
			<param name="r" value="1"/>
			<param name="g" value="1"/>
			<param name="b" value="1"/>
		</operator>
	</rule>
	-->
</rules>
